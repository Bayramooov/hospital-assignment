<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Page Title</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <script src='main.js'></script>
</head>
<body>
  <!-- <form action="/login" method="POST">
    <br><label for="name">Name</label>
    <br><input type="text" name="name" />
    <br>
    <br><label for="password">Password</label>
    <br><input type="password" name="password" />
    <br>
    <br><button type="submit">Submit</button>
  </form> -->

  <button id="fetch">fetch</button>
  <pre id="data" style="font-size:20px"></pre>
  <pre id="data2" style="font-size:20px"></pre>
<script>
  async function get(url) {
    var result;
    await fetch(url)
      .then(res => res.json())
      .then(data => result = data)
      .catch(err => console.error(err));
    return result;
  }

  async function post(url, body) {
    var result;
    await fetch(url, {
      method: 'POST',
      // body: encodeURIComponent(JSON.stringify(body))
      body: JSON.stringify(body)
    }).then(res => res.json())
    .then(data => result = data)
    .catch(err => console.error(err));
    document.getElementById("data").innerHTML = JSON.stringify(result, false, 4);
    return result;
  }

  // document.getElementById("fetch").addEventListener("click", async () => {
  //   let data = await get('https://jsonplaceholder.typicode.com/posts');
  //   document.getElementById("data").innerHTML = JSON.stringify(data[0], false, 4);
  // });

  document.getElementById("fetch").addEventListener("click", async () => {
    let data = await post('http://localhost:4100/post', {
      name: 'Sardor',
      last_name: 'Bayramov'
    });
    document.getElementById("data2").innerHTML = JSON.stringify(data, false, 4);
  });

</script>
</body>
</html>
